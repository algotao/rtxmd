---
sidebar_position: 2
description: 策略圈选是RTA的典型能力，广告主通过判断设备号所属的人群及价值，通过回复策略ID及扩展属性的形式，扰动平台广告决策，提升广告效果。
keywords: [RTA, 策略圈选, 拉新, 拉活]
---

# 策略圈选

策略是RTA功能的基础，每个的客户都应认真学习并理解它的用法。在RTA中可拥有上百个`策略ID`，每个策略ID代表着一种`投放目标`，对应关联着`投放人群`与`广告集合` 。在策略ID上还可承载**调价调权**与**DPA商品推荐**的调节功能。如果你熟悉人群包的使用，那可以用人群包与广告绑定的关系来快速理解它。不过RTA策略比人群包更为强大，体现在**实时性、扩展性、保密性**等方面。

:::caution

在实时交互中回复的 **策略ID** 应在平台提前注册并有效，回复`未注册`的策略ID将有可能损害广告投放效果。

:::

为了展现RTA策略的应用场景，本文将以某客户的RTA使用案例进行说明。*场景进行了简化*

## 投放人群数据源
一般而言，App产品方能够拥有下列数据
+ 历史安装过的设备ID集合
+ 用户近期唤起时间
+ N天内活跃时长

## 拉活案例

某App要对用户进行拉活，其目标人群为：`在最近7天未活跃，且在7-180天有过活跃的用户`。促活RTA策略ID定为`dau7to180`以便于记忆，通过管理API将策略ID绑定相关`广告主ID/广告计划ID/广告ID`。

*未对[0-7)天活跃过的用户投放的原因为这部分用户近期有过活动，有更大的概率用户自行活跃，可暂不投放广告。未对超过180天的用户投放的原因为这部分客户已经流失，不能以常规拉活手段简单促活。*

在以DAU作为计量目标的投放场景中，其核心考核目标为**设备的当天首次唤起率**（简称首唤率）。

> **首唤率 = 首次唤起UV数 / 唤起总数**

### 拉活目标计算
拉活目标计算可拆成三个环节：
+ 1、离线计算计算最近 [1-n) 天未活跃，且在 [n,m] 天内活跃过用户集合 **A** 。
+ 2、实时计算当天被唤起的实时用户集合 **B**。
+ 3、实时计算当天的可投放目标 **T**

> **T = A - B**

### 拉活实时决策
+ 当请求的设备号命中 **T**，则返回策略号 `dau7to180`

```protobuf
// 交互样例
request_id:  "Jo825w_uEe2xLlJUAFwvSQ"
code:  0
out_target_id:  "dau7to180"
```

## 拉新案例

某App要对用户进行拉新，其目标人群为：`历史上未安装过的纯新用户`。拉新RTA策略ID定为`new`以便于记忆，通过管理API将策略ID绑定相关`广告主ID/广告计划ID/广告ID`。

### 拉新目标计算
纯新目标计算可拆成三个环节：
+ 1、离线计算历史所有激活过的用户集合 **A** 。
+ 2、实时计算当天激活的实时用户集合 **B**。
+ 3、实时计算当天的可投放目标 **T**

> **T = not (A + B)**

### 拉新实时决策
+ 当请求的设备号命中 **T**，则返回策略号 `new`。*注意这里的C是取反运算的结果。*

```protobuf
// 交互样例
request_id:  "Jo825w_uEe2xLlJUAFwvSQ"
code:  0
out_target_id:  "new"
```

## 黑名单排除案例
在某些客户的投放中，执行非黑即白的策略。即除了黑名单设备以外，全部可出。该场景比较简洁，只需排除黑名单人群即可。

> **T = not A**

## 多投放目标案例
我们有多款App需要做拉新拉活，这几款App分别是：`新闻、视频、音乐`，根据拉新拉活的不同目标，我们定义了以下的策略表

|  App | 策略ID | 策略说明 |
|  ----  | ----  | ---- |
|  news  | news_dau  | 新闻拉活 |
|  news  | news_new  | 新闻拉新 |
|  video  | video_dau  | 视频拉活 |
|  video  | video_new  | 视频拉新 |
|  music  | music_dau  | 音乐拉活 |
|  music  | music_new  | 音乐拉新 |

### 多投放目标实时决策
在多投放目标场景中，在接收到一个RTA请求时，需遍历每一个投放目标并做出决策，决策结果合并返回。例如经过计算，命中了`新闻拉新、视频拉活、音乐拉活`则返回样例为

```protobuf
// 交互样例
request_id:  "Jo825w_uEe2xLlJUAFwvSQ"
code:  0
out_target_id:  "news_new"
out_target_id:  "video_dau"
out_target_id:  "music_dau"
```

## 全部拒绝
当未命中任何投放目标，应返回全部拒绝状态 `code != 0`
```protobuf
// 交互样例
request_id:  "Jo825w_uEe2xLlJUAFwvSQ"
code:  1
```

## 全部接受
这是一种**不推荐**的交互方式，表现为code=0 且 无策略ID。以此状态回复时所有广告都可参与竞争(不突破投放端定向)，等同于无RTA干预的结果。
```protobuf
// 交互样例
request_id:  "Jo825w_uEe2xLlJUAFwvSQ"
code:  0
```

## 非法策略ID
未在平台注册并在实时交互中回复的策略ID将被视为`非法`。非法策略ID在特定情况下会损害广告投放效果。

例如做了以下交互，策略 `mytest`未在平台注册
```protobuf
// 交互样例
request_id:  "Jo825w_uEe2xLlJUAFwvSQ"
code:  0
//highlight-next-line
out_target_id:  "mytest"
```

则该回复将被退化为
```protobuf
// 交互样例
request_id:  "Jo825w_uEe2xLlJUAFwvSQ"
code:  0
```

:::caution

当code=0且 回复策略 `有且仅有` **非法策略ID** 时，逻辑表达式将退化为全局接受。

:::